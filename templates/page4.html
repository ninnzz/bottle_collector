<!DOCTYPE html>
<html>

<head>
  
  <meta charset="UTF-8"
	<link rel="stylesheet" type="text/css" href="page4.css">
	<link rel="stylesheet" type="text/py" href="capture.py">

</head>
<body>
  <div id="main">

    <div id="screenshot">
      <video autoplay></video>
      <img src="">
      <canvas style="display:none;"></canvas>
      <button id="capture-button">Capture video</button>
      <button id="screenshot-button">Capture video</button>
      <button id="cssfilters-apply">Apply CSS filter</button>
    </div>

  </div>
  <script type="text/javascript">

    const captureVideoButton = document.querySelector('#capture-button');
    const screenshotButton = document.querySelector('#screenshot-button');
    const img = document.querySelector('#screenshot img');
    const video = document.querySelector('#screenshot video');
    const constraints = {
      video: true
    };

    const canvas = document.createElement('canvas');

    // Start camera
    navigator.mediaDevices.getUserMedia(constraints).then(handleSuccess).catch(handleError);

    screenshotButton.onclick = video.onclick = function() {
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      canvas.getContext('2d').drawImage(video, 0, 0);
  
      // Other browsers will fall back to image/png
      // Remove this, nilagay ko lang para makita ung image
      img.src = canvas.toDataURL('image/webp');
      callBottleCheckerAPI();

    };

    function handleSuccess(stream) {
      screenshotButton.disabled = false;
      video.srcObject = stream;
    }

    function handleError(stream) {
      console.log('Error lol');
    }

    function callBottleCheckerAPI() {
        
    }

  </script>


</body>
</html>